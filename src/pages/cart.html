<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>购物车</title>
    <link rel="stylesheet" href="../sass/cart.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="../lib/bootstrap/dist/js/bootstrap.min.js">
</head>
<div class="car">
    <div class="top">
        <div class="main bt">
            <nav class="nav pull-left btz">
                <a class="nav-link" href="#">手机版</a>
                <a class="nav-link" href="#">企业采购</a>
                <a class="nav-link" href="#">商城公告</a>
                <a class="nav-link" href="#">意见反馈</a>
            </nav>
            <nav class="nav pull-right bty">
                <a class="nav-link" href="./login.html">登录</a>
                <a class="nav-link" href="#">注册</a>
            </nav>
        </div>
    </div>
    <div class="imgtop">
        <div class="i-top main">
            <img src="../images/cart-top.png" alt="">
        </div>
    </div>
    <div class="dx">
        <div class="xdx main">
            <!-- <div class="xdx-top">
                <input type="checkbox">
                <span class="s1">全选</span>
                <span class="s2">商品名称</span>
                <span class="s3">单价</span>
                <span class="s4">数量</span>
                <span class="s5">小计</span>
                <span class="s6">操作</span>
            </div>
            <div class="xdx-cen"> -->
            <!-- <div class="cen-sp">
                    <div class="selete fl">
                        <input type="checkbox">
                    </div>
                    <div class="info fl">
                        <img src="../images/99.jpg" alt="">
                        <span>商品堆积阶地信息</span>
                    </div>
                    <div class="dj fl">
                        <span>488</span>
                    </div>
                    <div class="shu fl">
                        <button class="sub">-</button>
                        <input type="text" value="1">
                        <button class="add">+</button>
                    </div>
                    <div class="xj fl">
                        <span>999</span>
                    </div>
                    <div class="sq fl">
                        <span>删除</span>
                    </div>
                </div> -->
            <!-- </div>
            <div class="xdx-foot">
                <span class="f1">选中商品树量：10</span>
                <span class="f2">商品总价：1000</span>
                <span class="f3">去结算</span>
                <span class="f4">清空购物车</span>
            </div> -->
        </div>
    </div>
    <div class="foot">
        <div class="footer main">
            <div class="footer-top">
                <ul>
                    <li>
                        <img src="../images/008.png" alt="">
                        <span>7天退货保障</span>
                    </li>
                    <li>
                        <img src="../images/012.png" alt="">
                        <span>15天换货承诺</span>
                    </li>
                    <li>
                        <img src="../images/065.png" alt="">
                        <span>150元起全场免运费</span>
                    </li>
                    <li>
                        <img src="../images/068.png" alt="">
                        <span>全国售后服务点</span>
                    </li>
                </ul>
            </div>
            <div class="footer-cen">
                <div class="cen1 fl">
                    <ul class="cenu1">
                        <li class="cenul">关注我们</li>
                        <li>中兴社区</li>
                        <li>官方微信</li>
                        <li>新浪微博</li>
                    </ul>
                    <ul class="cenu1">
                        <li class="cenul">帮助中心</li>
                        <li>支付方式</li>
                        <li>购物指南</li>
                        <li>配送指南</li>
                    </ul>
                    <ul class="cenu1">
                        <li class="cenul">售后服务</li>
                        <li>退换货流程</li>
                        <li>售后网点</li>
                        <li>退换货政策</li>
                        <li>保修政策</li>
                    </ul>
                    <ul class="cenu1">
                        <li class="cenul">关于商城</li>
                        <li>联系我们</li>
                        <li>商城简介</li>
                        <li>礼品团购</li>
                    </ul>
                </div>
                <div class="cen2 fl">
                    <p><span class="cen-span">
                            <img src="../images/037.png" alt="">在线客服
                        </span></p>
                    <p>
                        电话热线: 400-880-9999转7
                    </p>
                    <p>
                        周一到周日 9:00 - 24:00 (全年无休)
                    </p>
                </div>
            </div>
            <div class="foot-bot">
                <p class="bot-p1">
                    <span>中兴社区</span>
                    <span>|</span>
                    <span>中兴通讯</span>
                    <span>|</span>
                    <span>汇天地</span>
                    <span>|</span>
                    <span>中兴云服务</span>
                    <span>|</span>
                    <span>中兴手机</span>
                </p>
                <p class="bot-p2">
                    <span>服务协议</span>
                    <span>|</span>
                    <span>隐私政策</span>
                    <span>|</span>
                    <span>©2014 - 2017 深圳市中兴智谷科技有限公司版权所有，并保留所有权利 </span>
                </p>
                <p class="bot-p3">
                    <span>增值电信业务经营许可证：粤B2-20160352</span>
                    <span>|</span>
                    <span>ICP备案证书号 :粤ICP备16018970号</span>
                    <span>|</span>
                    <span>粤公网安备 44030502001132号</span>
                    <span>|</span>
                    <span><img src="../images/001.gif" alt=""></span>
                </p>
            </div>
        </div>
    </div>
</div>

<body>
    <script src="../lib/jquery/dist/jquery.min.js"></script>
    <script src="../lib/swiper/js/swiper.min.js"></script>
    <script src="../js/index.js"></script>
    <script>
        const cart1 = JSON.parse(localStorage.getItem('cart1'))
        if (cart1 === null) {
            alert('购物车是空的!!!')
            window.location.href = './list.html'
        } else {
            xrym()
            bing()
        }
        // console.log(cart1)
        function xrym() {
            let selectAll = cart1.every(item => {
                return item.sel === true
            })
            let str = `<div class="xdx-top">
                <input class="selectAll" type="checkbox"  ${selectAll ? 'checkbox' : ''} >
                <span class="s1">全选</span>
                <span class="s2">商品名称</span>
                <span class="s3">单价</span>
                <span class="s4">数量</span>
                <span class="s5">小计</span>
                <span class="s6">操作</span>
            </div>
            <div class="xdx-cen">`
            cart1.forEach(item => {
                str += `<div class="cen-sp">
                    <div class="selete fl">
                        <input type="checkbox" ${item.sel ? 'checkbox' : ''}>
                    </div>
                    <div class="info fl">
                        <img src="${item.src}" alt="">
                        <span>${item.name}</span>
                    </div>
                    <div class="dj fl">
                        <span>￥：${item.per}</span>
                    </div>
                    <div class="shu fl">
                        <button class="sub">-</button>
                        <input type="text" value="${item.number}">
                        <button class="add">+</button>
                    </div>
                    <div class="xj fl">
                        <span>￥：${item.xiao}</span>
                    </div>
                    <div class="sq fl">
                        <span>删除</span>
                    </div>
                </div>`
            })
            let selectArr = cart1.filter(item => item.sel)

            let selectNumber = 0
            let selectPer = 0
            selectArr.forEach(item => {
                selectNumber += item.number
                selectPer += item.xiao
            })
            // console.log(selearr)
            str += `</div>
            <div class="xdx-foot">
                <span class="f1">选中商品树量：${selectNumber}</span>
                <span class="f2">商品总价：${selectPer}</span>
                <button class="f3" ${selectArr.length ? '' : 'disabled'}>去结算</button>
                <span class="f4">清空购物车</span>
            </div>`
            $('.xdx').html(str)
        }

        function bing() {
            $('.xdx').on('change', '.selectAll', function () {
                console.log(this.checked)
                cart1.forEach(item => {
                    item.sel = this.checked
                })
                xrym()
            })
        }
    </script>
</body>

</html>